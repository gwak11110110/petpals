<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.himedia.pet.DAO.dataDAO">
<select id="view" resultType="com.himedia.pet.DTO.dataDTO">
   SELECT id, name, loadAddress, number, homepage, holiday, operatingTime, parking, petSize, petben, 
   areaIn, areaOut, wido, gyeongdo  
   from petdata where id=#{param1}
</select> 

<!-- 리뷰 -->
<insert id="write">
   INSERT into board set pNAme=#{param1},writer=#{param2},content=#{param3},rating=#{param4},created=sysdate(),userId=#{param5}
</insert>
<select id="reviewLoad" resultType="com.himedia.pet.DTO.boardDTO">
   SELECT id, writer, content,rating, created from board where pName=#{param1} limit #{param2},10
</select> 
<delete id="rDelete">
   delete from board where id=#{param1}
</delete>
<update id="rUpdate">
   UPDATE board set content=#{param1},rating=#{param2},created=sysdate() where id=#{param3}
</update>
<select id="reLoad" resultType="com.himedia.pet.DTO.boardDTO">
   SELECT writer, content,rating from board where id=#{param1}
</select>
<select resultType="_int" id="reviewTotal">
   select count(*) from board where pName like #{param1}
</select>

<!-- 리뷰목록 불러오기 -->
<select id="reviewList" resultType="com.himedia.pet.DTO.boardDTO">
    select c.id,a.content,a.writer,a.rating
      from  board a,login b,petdata c
      where a.userId=b.id
      and a.pName=c.id
      and a.userId=#{param1}  
</select>


<!-- 찜 -->
<insert id="jjim">
   insert into jjim set userid=#{param1}, dataid=#{param2}
</insert>
<select resultType="_int" id="chekJjim">
   select count(*) from jjim where userid=#{param1} and dataid=#{param2}
</select>
<select resultType="_int" id="getJjimid">
   select id from jjim where userid=#{param1} and dataid=#{param2}
</select>
<delete id="delJjim">
   delete from jjim where id=#{param1}
</delete>

<!-- 찜목록 불러오기 -->
<select id="jjimList" resultType="com.himedia.pet.DTO.dataDTO">
   select b.id,b.name,b.number,b.loadAddress
   from jjim a, petdata b,login c
   where a.dataid=b.id
   and a.userid=c.id
   and a.userid=#{param1}   
</select>


  <!-- 찜 이메일로 아이디가져오기 -->
  <select id="getjjim_id" resultType="string">
      select id from login where email=#{param1}
  </select>

<!-- Qna-->
<!-- <insert id="QnaWrite">
   INSERT into Questions set title=#{param1},writer=#{param2},content=#{param3},created_at=sysdate()
</insert>
<select id="QnaLoad" resultType="com.himedia.pet.DTO.QnaDTO">
   SELECT id, title, writer, content, created_at from Questions limit #{param1},10
</select> 
<select resultType="_int" id="QnaTotal">
   select count(*) from Questions
</select>
<update id="Qmodify">
   UPDATE Questions set title=#{param1}, content=#{param2} where id=#{param3}
</update>
<delete id="QDelete">
   delete from Questions where id=#{param1}
</delete>
<insert id="comment"> 
   INSERT into Answers set question_id=#{param1} , writer_answer=#{param2}, content=#{param3},created=sysdate() 
   </insert>
<select id="QnAanswer" resultType="com.himedia.pet.DTO.AnswersDTO"> 
   select id,question_id,content,writer_answer from Answers 
</select>
<update id="commentModify"> 
   UPDATE Answers set content=#{param2} where id=#{param1} 
</update>
<delete id="commentDelete"> 
   delete from Answers where id=#{param1} 
</delete> -->
</mapper>